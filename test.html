<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"> 
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <title>Document</title>
</head>
<body>
    <h1>TEST UNIT</h1> 
    <div class="container">
        <div id="table_1">
            <button onclick="call_api('GET','http://localhost/comp353_main_project/api/post/read.php', '#'+'table_1')">Click me</button>
            <script> console.log(document.this.parentNode.nodeName);</script>
        </div>
    </div>
    <script>  
        function call_api(mode, url, dst){
            
            var request = new XMLHttpRequest() 
            request.open(mode, url, true) 
            request.onload = function() { 
                var data = JSON.parse(this.response)
                create_table(dst,data)
            } 
            request.send()
        }


        function create_table(dst, data){
            var table = '<table class="table " border=3>';
            console.log("JSON receive:")
            console.log(data) 
            // table head
            table+='<tr>'; 
            for(el in data[0]) table += '<th>' + el + '</th>'; 
            table+='</tr>'; 
            // table data
            for(i = 0; i < data.length; i++){ 
                table+='<tr>'
                for (var key in data[i])  table+='<td>'+data[i][key]+'</td>' 
                table+='</tr>'
            } 
            table+='</table>'
            $(dst).append(table); 
        }
        </script>
</body>
</html>